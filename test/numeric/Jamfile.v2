# Copyright 2012 Karsten Ahnert
# Copyright 2012 Mario Mulansky
# Distributed under the Boost Software License, Version 1.0.
# (See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

# bring in rules for testing


import testing ;
import ../../config/checks/config : requires ;

use-project boost : $(BOOST_ROOT) ;

project
    : requirements
      <define>BOOST_ALL_NO_LIB=1
      # use test library
      <library>/boost//unit_test_framework
      <link>static
      <toolset>clang:<cxxflags>-Wno-unused-variable
      # <cxxflags>-D_SCL_SECURE_NO_WARNINGS
      <warnings>extra
      <toolset>msvc:<warnings-as-errors>on
      <toolset>clang:<warnings-as-errors>on
      <toolset>gcc:<warnings-as-errors>on
      [ requires cxx14_decltype_auto cxx14_generic_lambdas cxx14_return_type_deduction cxx14_variable_templates cxx14_constexpr ]
    ;

test-suite "odeint"
     :
     [ run runge_kutta.cpp ]
     [ run symplectic.cpp ]
     [ run rosenbrock.cpp ]
     [ run adams_bashforth.cpp ]
     [ run adams_bashforth_moulton.cpp ]
     [ run adaptive_adams_bashforth_moulton.cpp ]
     [ run abm_time_dependent.cpp ]
     [ run order_quadrature_formula.cpp ]
     [ run velocity_verlet.cpp ]
     : <testing.launcher>valgrind
     ;
